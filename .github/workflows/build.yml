name: Actions ðŸ˜Ž

on:
  pull_request: {}
  push: { branches: [development] }

env:
  UNITY_LICENSE: ${{ secrets.UNITY_LICENSE }}

jobs:
  build:
    name: Build my project âœ¨
    runs-on: ubuntu-latest
    steps:
      # Checkout
      #- name: Checkout repository
      #  uses: actions/checkout@v2
      #  with:
      #    lfs: true

      # Cache
      #- uses: actions/cache@v1.1.0
      #  with:
      #    path: Library
      #    key: Library

      # Build
      #- name: Build project
      #  uses: webbertakken/unity-builder@v0.10
      #  with:
      #    unityVersion: 2020.1.4f1
      #    targetPlatform: StandaloneWindows64

      - name: Sonarscanner for dotnet
        uses: Secbyte/dotnet-sonarscanner@v1.2
        with:
          buildCommand: dotnet build .
          testCommand: dotnet test .
          projectKey: AoTTG-2_AoTTG-2
          sonarOrganisation: aottg-2
          beginArguments: /d:sonar.verbose="true" /d:sonar.cs.opencover.reportsPaths="/path/to/coverage.xml" /d:sonar.coverage.exclusions="**/*.cs"
        env:
          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
          GITHUB_TOKEN: ${{ secrets.GIT_TOKEN }}
